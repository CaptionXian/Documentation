**主旨**

本次测试基于数链预发环境，用于初步测试主流程能否跑通。

**角色**

    查询方：富数
    mapping提供方：泰岳
    画像提供方：游族

**测试安排**

1 在数链上进行合约的创建（此步由富数进行）

登录数链交易所，创建mapping合约、画像合约

2 在数链上进行数据字典的创建（此步由富数进行）

    为mapping合约创建两个数据字典。包括：
    
    1 通过手机号原文查询设备号md5 
    2 通过设备号md5列表获取匹配到的设备号
    
    为画像合约创建数据字典。包括：
    
    1 通过混淆过的设备号md5查询匹配的设备号md5与对应画像数据

3 参与合约（请泰岳、游族实施） 

登录数链交易所，请@蔚来帮忙看下怎么参与

4 泰岳/游族的数链程序启动

*准备工作*

准备至少一台服务器，并确保mysql、redis组件可用

*发布包安装*

下载发布包，链接地址：（链接待发布后补充）

*配置*

解压发布包，进入conf目录，填写数链账户名、私钥、mysql、redis链接信息。

*启动*

解压发布包，进入bin目录

    启动eds
    
    bash start.sh eds-server test 8080
    
    启动提供方服务
    
    bash start.sh producer test 8091

*验证启动是否成功*

访问logs目录，查看eds和提供方日志启动是否有报错。

*关于更多eds启动的文档，请参考*

https://github.com/unitedata-org-public/Documentation/blob/master/data_getway.md

5 泰岳的mapping方插件部署（由泰岳实施）

将泰岳的mapping方插件jar包放到服务器内%JRE_HOME%/ext/lib中，这样就能被后续eds启动时加载到。重启eds。

6 游族的画像插件部署（由游族实施）

将画像插件放到服务器内%JRE_HOME%/ext/lib中，这样就能被后续eds启动时加载到。重启eds。

7 绑定数据字典与插件


登入eds，选择数据字典对应合约，选择“接入配置”


在“接入方式”中，选择“自定义”，输入你插件的完整类名（例如MobieToDevices），选择“验证”，输入查询参数后点“执行”，待出现“测试通过”后即为验证通过：


测试通过后，选择“提交”，出现成功提示，即为绑定成功：























