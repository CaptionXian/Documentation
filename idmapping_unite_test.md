### 主旨

本次测试基于数链预发环境，用于初步测试主流程能否跑通。

### 角色


    查询方：富数
    mapping提供方：泰岳
    画像提供方：游族

### 整体测试安排见下文


### 准备工作

1 在数链上进行合约的创建（此步由富数进行）

登录数链交易所，创建mapping合约、画像合约

2 在数链上进行数据字典的创建（此步由富数进行）

    为mapping合约创建两个数据字典。包括：
    
    1 通过手机号原文查询设备号md5 
    2 通过设备号md5列表获取匹配到的设备号
    
    为画像合约创建数据字典。包括：
    
    1 通过混淆过的设备号md5查询匹配的设备号md5与对应画像数据

3 参与合约（请泰岳、游族实施） 


*  1. 打开数链交易市场：https://preview.unitedata.link，  若已登录，则进入第2步，若未登录，则点击【设置】进入【钱包管理】。创建一个新钱包，然后导入私钥

* 2.参与合约

 泰岳：数据市场找到Mapping合约，点击合约，进入详情页。点击【我要参与】，选择【我是提供方】确认参与，输入钱包密码参与成功，选择需求方【游族】进行签约
 游族：数据市场找到Mapping合约，点击合约，进入详情页。点击【我要参与】，选择【我是需求方】确认参与，输入钱包密码参与成功，选择需求方【泰岳】进行签约
       数据市场找到用户画像合约，点击合约，进入详情页。点击【我要参与】，选择【我是提供方】确认参与，输入钱包密码参与成功，选择需求方【泰岳】进行签约
     
     
### 泰岳/游族的数链程序启动（泰岳游族各自实施）

1. 准备工作. 准备至少一台服务器，并确保mysql、redis组件可用
2. 发布包安装. 下载发布包，链接地址：（链接待发布后补充）
3. 配置、mysql初始化 ：https://github.com/unitedata-org-public/Documentation/blob/master/data_getway.md 见"通过release包进行部署"一节。
4. 启动
eds:
		
		````
	    ./start.sh eds-server test 8080
		````
提供方：
		
		````
	    ./start.sh producer test 8091
		````

5. 验证启动是否成功. 访问logs目录，查看eds和提供方日志启动是否有报错。



### 泰岳的mapping方插件部署（由泰岳实施）

将泰岳的mapping方插件jar包放到服务器内%JRE_HOME%/ext/lib中，这样就能被后续eds启动时加载到。重启eds。

### 游族的画像插件部署（由游族实施）

将画像插件jar包放到服务器内%JRE_HOME%/ext/lib中，这样就能被后续eds启动时加载到。重启eds。

### 绑定数据字典与插件（游族泰岳各自实施）


登入eds，选择数据字典对应合约，选择“接入配置”（初始账号为：admin，密码：123456）


在“接入方式”中，选择“自定义”，输入你插件的完整类名（例如MobieToDevices），选择“验证”，输入查询参数后点“执行”，待出现“测试通过”后即为验证通过：


测试通过后，选择“提交”，出现成功提示，即为绑定成功：























